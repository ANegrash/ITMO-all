# Лабораторная работа 1

**Название:** "Разработка драйверов символьных устройств"

**Цель работы:** получить знания и навыки разработки драйверов символьных устройств для операционной системы Linux.

## Описание функциональности драйвера

При загрузке драйвера в ядро создаются два файла: /dev/VAR4, /proc/VAR4.  
При записи в /dev/VAR4 запоминается количество пробелов в тексте. В дальнейшем информацию о количестве пробелов можно получить путем чтения из /proc/VAR4 или /dev/VAR4. В первом случае вывод происходит в консоль пользователя. Во втором случае вывод напрявляется в кольцевой буфер ядра с помощью функции printk.  
При выгрузке ядра оба файла удаляются. 

## Инструкция по сборке

Makefile помимо команд all и clean, предназначенных для сборки и удаления, содержать команды insmod и rmmod.  
insmod - загружает модуль в ядро.  
rmmod - выгружает модель из ядра.  
Эти команды вызывают shell-скрипты и созданы лишь для удобства.

## Инструкция пользователя

Для взаимодействия с модулем необходимо ввести текст в файл /dev/VAR4. Это можно сделать с помощью команды echo.  
Для получения информации нужно прочитать из файла /dev/VAR4 или /proc/VAR4 с помощью команды cat. В первом случае информация выводится в буфер ядра, который можно открыть с помощью команды dmesg. Во втором случае вывод напрявляется в консоль пользователя.

## Примеры использования

Сборка и загрузка модуля (эти команды необходимо выполнять из директории с исходными файлами):  
make  
make insmod

После выполнения этих команд модуль загрузится в ядро.  

Следующей командой нужно записать в файл /dev/VAR4 и прочитать файл /proc/VAR4:  
echo 1 2 3 4 > /dev/VAR4  
cat /proc/VAR4  

После выполнения этих команд на вывод консоли поступит '3'. Так как в сообщении три пробела.  
Также есть возможность прочитать из файла /dev/VAR4. После этого в буфере ядра также выведется 3. Это можно посмотреть с помощью команды sudo dmesg.
